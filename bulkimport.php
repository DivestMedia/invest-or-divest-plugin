<?php

// header( 'Content-type: text/html; charset=utf-8' );

$videos = [
    [
        "category" => "Investing for Beginners",
        "videos" => [
            "gG60m9HuUYQ",
            "-ccQ6OPUQcg",
            "Oz13rhZ4BB4",
            "hCzIcS_xPiQ",
            "LU8tubkz_Fg",
            "Uydci7wfces"
        ]
    ],
    [
        "category" => "Investing in Stocks",
        "videos" => [
            "Snsapamg8CU",
            "GnJCOof2HJk",
            "F3QpgXBtDeo",
            "_uQjGz6jp2E",
            "8M-VBJihbMc"
        ]
    ],
    [
        "category" => "Investing in Bonds",
        "videos" => [
            "0DT6WBwZJbw",
            "C1FPhvk17B8",
            "X_840-MUtn4",
            "TTgEMggb3wY",
            "jeRxswiPJBs",
            "lP8B2zjuNIw"
        ]
    ],
    [
        "category" => "Investing in Cash Equivalents",
        "videos" => [
            "4Pxr_ZoZ050",
            "KVNOQQy_ISU",
            "AV7ILGteeYw",
            "c8fOv_HhETA"
        ]
    ],
    [
        "category" => "Investing in Alternjatives",
        "videos" => [
            "1iM8err9cRY",
            "jOBGGep4DSw",
            "k6B7e0JF8uA",
            "d3NWBvKQEdE",
            "5lnSXxbR5pU",
            "ACkhTVpnDMo",
            "YcNhTWVJgy0"
        ]
    ],
    [
        "category" => "Investing in Options",
        "videos" => [
            "0OhPxKWUY5c",
            "58KYMJ-UwdM",
            "4ZoVe3z3XsQ",
            "OqMVCWa_Nto",
            "6zZQ-UY1v3k",
            "EfmTWu2yn5Q",
            "U5uXOqygJRE",
            "is5Whul7KUg"
        ]
    ],
    [
        "category" => "Investing in Commodities",
        "videos" => [
            "kSqTfZWu-MQ",
            "3LunPcMtOG4",
            "JtM6ZHLaUDo",
            "JJPgXyW3a8M",
            "PrBFTm1C170",
            "Si6wQ-ih0jQ"
        ]
    ],
    [
        "category" => "Investing in Annuities",
        "videos" => [
            "57TF-QZuyvg",
            "RFjJgRYBXVw",
            "Vs3loeKFbAo",
            "9-HSrtO5Dcw",
            "8ABm3uARLUA",
            "cf7MUTIPgCs",
            "jXS-ULZCy_M"
        ]
    ],
    [
        "category" => "Investing in Real Estate",
        "videos" => [
            "8zaHfdERuW0",
            "swYEWx5qDR4",
            "nVta7w7y1NI",
            "nKq1STLI17g",
            "QZlnfKa0NBY",
            "Z3B6bCD48rA",
            "LB8ATJW9t5w"
        ]
    ],
    [
        "category" => "Investing in Forex",
        "videos" => [
            "W8_xIb0ZltE",
            "jo4z26THnpo",
            "CW8WQeBuUa8",
            "Fbvqg77ZXSU",
            "mrrErutsxoo"
        ]
    ],
    [
        "category" => "Investing in Futures",
        "videos" => [
            "Yqkq-w4Jl3c",
            "6_QHMyhS6gk",
            "L1Ce53LJU0w",
            "dn7HssQAmog",
            "kBtrxAjtG04",
            "fmAcDWZwTw4",
            "FOTobOm1M1s"
        ]
    ],
    [
        "category" => "Investing in Mutual Funds",
        "videos" => [
            "MNEKXrCUV_0",
            "U8363dfQkFU",
            "3RU4y1JFzEI",
            "qWv5hgrniIE",
            "Es3vXJ7GoV8",
            "deaU-eVM5xs"
        ]
    ],
    [
        "category" => "Investing in ETFs",
        "videos" => [
            "PlcU5J_1Axs",
            "FM6KnD75QrE",
            "0qUPGc8wbMM",
            "8BKZj1zIYoc",
            "3RU4y1JFzEI",
            "aAxZgk_ibDA"
        ]
    ],
    [
        "category" => "Investing in Hedge Funds",
        "videos" => [
            "xjI88uxT964",
            "ksLySMWRwLs",
            "uuLK0L3aztU",
            "F9z_3obVjFs",
            "5ItfdOC1B9Q",
            "0A3YLOfxNd4"
        ]
    ],
    [
        "category" => "MMC Headlines",
        "videos" => [
            "Ro_0p-Jo8ls",
            "qQv44xXjP8s",
            "CZ1zN-qitUE",
            "D0DbZk5LPPA",
            "i3JVxjReKW4",
            "SSF7SzN68q8",
            "eXochRPP9hY",
            "_BP7cadaDQM",
            "c6iopuwDj3c",
            "5veNrON1vPg",
            "41WjeLWr6r4",
            "EF9valDeicM",
            "8QqODK5GB4M",
            "BqYa5xP-h6A",
            "07_dmI-54K4",
            "ZnQkrQDsBO0",
            "7fGl2Uni9KQ",
            "ZrqUb2B7qj0",
            "jZRUxfnKx-g",
            "BSZrln2tFqY"
        ]
    ],
    [
        "category" => "Daily Stock Picks",
        "videos" => [
            "3rxreWZ5_G4",
            "K6VkoCpwvu8",
            "ApCVgGTvlHQ",
            "7p20RF9rWHU",
            "PmLPOGvftfA",
            "MyAVlq9WdTs",
            "sBWN_hmdrh8",
            "V3XMex2ol6Q",
            "aquXLOyhyz4",
            "v-sDHVe2m3U",
            "CbHvnFgaMqs",
            "V1aI4FinwdQ",
            "HlsoTT13y7c",
            "T8sumWoOZUQ",
            "tfaB7FAoL2A",
            "szMr3YWwT54",
            "6xgJbW81K_o",
            "4x-IbaprK-0"
        ]
    ],
    [
        "category" => "Andy Penders",
        "videos" => [
            "hW6k5qLAu0A",
            "VxrZ2w4Ad0I",
            "y3_21xTqOhg",
            "0IOrhWs9SKg",
            "OVNzsnUNF2k",
            "54cQar5LDrU",
            "637TJ_9XMak",
            "9AwAXUfTgUs",
            "_fqUtePTPj8",
            "Bw2PD_9BF9Y"
        ]
    ],
    [
        "category" => "Weekly Market Recap",
        "videos" => [
            "DyWioGFqJIk"
        ]
    ],
    [
        "category" => "Investment Tips",
        "videos" => [
            "ix6DQjrIykg",
            "5iuu2Uax_g4",
            "vsT-QCVHlvM",
            "YSgEdqGZjK0",
            "kMWInKg1cVY",
            "z-mz02XFM9w",
            "GYSjewDQr3w",
            "m4Zqvg1zh8c"
        ]
    ],
    [
        "category" => "World News",
        "videos" => [
            "xy5czG-4QFQ",
            "vbpxTQtGAfY",
            "dVk3n_cG4WU",
            "6m9ASG8-48A",
            "2SUiQvSf-L0",
            "UQfWy--6QTM",
            "OiToe6GsiWc",
            "vDrTVD48mNM",
            "Q0L2dbT_IR4"
        ]
    ],
    [
        "category" => "Board of Advisors",
        "videos" => [
            "LnKNCbO5J9U"
        ]
    ]
];

include_once ABSPATH . 'wp-admin/includes/taxonomy.php';

function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_AUTOREFERER, TRUE);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}

foreach ($videos as $key => $videoset) {


    $category = get_term_by('slug', sanitize_title($videoset['category']) , 'iod_category' );
    if ($category && $category->term_id ) {
        $category = $category->term_id;
    }else{
        $category = wp_insert_term($videoset['category'], 'iod_category');
        if($category){
            $category = $category['term_id'];
        }
    }

    foreach ($videoset['videos'] as $id => $v) {

        $content = file_get_contents_curl("http://youtube.com/get_video_info?video_id=".$v);
        parse_str($content, $ytarr);

        $title = 'Untitled Video';
        if(isset($ytarr['title'])){
            $title = $ytarr['title'];
        }
        // break;
        $pid = wp_insert_post([
            // 'ID' => (int)($id + 1272),
            'post_author' => 1,
            'post_content' => '',
            'post_title' => $title,
            'post_status' => "Publish",
            'post_type' => "iod_video",
            'post_category' =>  [$category],
            'iod_category' => [$category],
            'meta_input' => [
                //     // '_gr_bonuses' => $bonus,
                //     '_gr_free_spins' => rand(20,30),
                //     '_gr_reels' => rand(3,5),
                //     '_gr_paylines' => rand(10,20),
                //     '_gr_min_max_bet' => rand(1000,10000),
                //     '_gr_jackpot' => rand(100000,1000000),
                //     '_gr_return_to_player' => rand(30,50) . '%',
                //     '_gr_autoplay' => 'Yes',
                //     '_gr_demo_embed' => $g->link,
                '_iod_video' => '{"type":"link","embed":{"url":"https://www.youtube.com/watch?v='.$v.'"}}',
                //     // '_gr_good' => $good,
                //     // '_gr_bad' => $bad,
                //     '_gr_score' => json_encode($ratingvalue),
                //     '_gr_screenshots' => '',
            ]
        ],false);
        if($pid){
            wp_set_post_terms( (int)$pid, [$category], 'iod_category' );
        }
    }

}
